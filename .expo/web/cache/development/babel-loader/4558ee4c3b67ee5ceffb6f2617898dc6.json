{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar WebBrowser = _interopRequireWildcard(require(\"expo-web-browser\"));\n\nvar _expoAuthSession = require(\"expo-auth-session\");\n\nvar _Platform = _interopRequireDefault(require(\"react-native-web/dist/exports/Platform\"));\n\nvar _Button = _interopRequireDefault(require(\"react-native-web/dist/exports/Button\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _context = require(\"./context\");\n\nvar _this = this,\n    _jsxFileName = \"/Users/coryortega/Desktop/Projects/React-Native/components/LoginButton.tsx\";\n\nWebBrowser.maybeCompleteAuthSession();\nvar discovery = {\n  authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n  tokenEndpoint: 'https://accounts.spotify.com/api/token'\n};\n\nvar LoginButton = function LoginButton() {\n  var scopes = [\"streaming\", \"user-read-currently-playing\", \"user-read-playback-state\", \"user-library-read\", \"user-library-modify\", \"user-modify-playback-state\", \"user-read-email\", \"user-read-private\", \"playlist-modify-public\", \"playlist-modify-private\"];\n\n  var _React$useContext = React.useContext(_context.AuthContext),\n      signIn = _React$useContext.signIn;\n\n  var _useAuthRequest = (0, _expoAuthSession.useAuthRequest)({\n    clientId: '5d228af4d8fe45d5b1bb9702187643c0',\n    scopes: ['user-read-email', 'playlist-modify-public', 'user-top-read'],\n    usePKCE: false,\n    redirectUri: 'http://localhost:19006/'\n  }, discovery),\n      _useAuthRequest2 = (0, _slicedToArray2.default)(_useAuthRequest, 3),\n      request = _useAuthRequest2[0],\n      response = _useAuthRequest2[1],\n      promptAsync = _useAuthRequest2[2];\n\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === 'success') {\n      var code = response.params.code;\n      console.log(\"response 1 =\", response);\n      var headers = {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        auth: {\n          username: '5d228af4d8fe45d5b1bb9702187643c0',\n          password: '2e64ed63024a402d81fde645767a3680'\n        }\n      };\n      var data = {\n        grant_type: 'client_credentials',\n        code: code,\n        scope: \"streaming user-read-currently-playing user-read-playback-state user-library-read user-library-modify user-modify-playback-state user-read-email user-read-private playlist-modify-public playlist-modify-private\"\n      };\n\n      _axios.default.post('https://accounts.spotify.com/api/token', _qs.default.stringify(data), headers).then(function (res) {\n        console.log(\"response 2 =\", res);\n        var token = res.data;\n        console.log(\"this is token:\", token);\n        signIn(token);\n\n        _axios.default.post(\"https://tenderfy.herokuapp.com/json/user-token\", token).then(function (res) {\n          console.log(res);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, [response]);\n  return React.createElement(_Button.default, {\n    disabled: !request,\n    title: \"Login with Spotify\",\n    color: _Platform.default.OS === 'ios' ? 'white' : '#e21051',\n    onPress: function onPress() {\n      promptAsync();\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  });\n};\n\nvar _default = LoginButton;\nexports.default = _default;","map":{"version":3,"sources":["/Users/coryortega/Desktop/Projects/React-Native/components/LoginButton.tsx"],"names":["WebBrowser","maybeCompleteAuthSession","discovery","authorizationEndpoint","tokenEndpoint","LoginButton","scopes","React","useContext","AuthContext","signIn","clientId","usePKCE","redirectUri","request","response","promptAsync","useEffect","type","code","params","console","log","headers","Accept","auth","username","password","data","grant_type","scope","axios","post","qs","stringify","then","res","token","catch","err","Platform","OS"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as WebBrowser from 'expo-web-browser';\nimport { makeRedirectUri, useAuthRequest } from 'expo-auth-session';\nimport { Platform, StyleSheet, Button } from 'react-native';\nimport qs from 'qs';\nimport axios from 'axios';\n\nimport { AuthContext } from './context';\n\nWebBrowser.maybeCompleteAuthSession();\n\n// Endpoint\nconst discovery = {\n  authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n  tokenEndpoint: 'https://accounts.spotify.com/api/token',\n};\n\n\nconst LoginButton = () => {\n\n    let scopes = \n        [\n            \"streaming\",\n            \"user-read-currently-playing\",\n            \"user-read-playback-state\",\n            \"user-library-read\",\n            \"user-library-modify\",\n            \"user-modify-playback-state\",\n            \"user-read-email\",\n            \"user-read-private\",\n            \"playlist-modify-public\",\n            \"playlist-modify-private\"\n          ];\n\n\n    const { signIn } = React.useContext(AuthContext);\n\n    const [request, response, promptAsync] = useAuthRequest(\n        {\n        clientId: '5d228af4d8fe45d5b1bb9702187643c0',\n        scopes: ['user-read-email', 'playlist-modify-public', 'user-top-read'],\n        // In order to follow the \"Authorization Code Flow\" to fetch token after authorizationEndpoint\n        // this must be set to false\n        usePKCE: false,\n        // For usage in managed apps using the proxy\n        redirectUri:\n        'http://localhost:19006/'\n        //   redirectUri: makeRedirectUri({\n        //     // For usage in bare and standalone\n        //     native: 'https://www.google.com/',\n        //   }),\n        },\n        discovery\n    );\n\n    React.useEffect(() => {\n        if (response?.type === 'success') {\n            const { code } = response.params;\n            console.log(\"response 1 =\", response)\n            const headers = {\n                headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                auth: {\n                username: '5d228af4d8fe45d5b1bb9702187643c0',\n                password: '2e64ed63024a402d81fde645767a3680',\n                },\n            };\n            const data = {\n                grant_type: 'client_credentials',\n                code: code,\n                scope:\"streaming user-read-currently-playing user-read-playback-state user-library-read user-library-modify user-modify-playback-state user-read-email user-read-private playlist-modify-public playlist-modify-private\"\n            };\n\n            axios.post('https://accounts.spotify.com/api/token', qs.stringify(data), headers)\n            .then(res => {\n                console.log(\"response 2 =\", res)\n                const token = res.data;\n                console.log(\"this is token:\", token)\n                signIn(token);\n\n                axios.post(\"https://tenderfy.herokuapp.com/json/user-token\", token)\n                .then(res => {\n                    console.log(res)\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n            })\n            .catch(err => {\n                console.log(err)\n            })\n        }\n    }, [response]);\n\n    return (\n        <Button\n        disabled={!request}\n        title=\"Login with Spotify\"\n        // style={styles.button}\n        color={Platform.OS === 'ios' ? 'white' : '#e21051'}\n        onPress={() => {\n            promptAsync();\n            // navigation.navigate('TabOne', { name: 'TabOne' })\n            // response?.type === 'success' ? props.navigation.navigate('Home')\n            }}\n        />\n    );\n}\n\nexport default LoginButton"]},"metadata":{},"sourceType":"script"}
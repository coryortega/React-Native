{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar WebBrowser = _interopRequireWildcard(require(\"expo-web-browser\"));\n\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\n\nvar _expoAuthSession = require(\"expo-auth-session\");\n\nvar _native = require(\"@react-navigation/native\");\n\nvar _Button = _interopRequireDefault(require(\"react-native-web/dist/exports/Button\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _this = this,\n    _jsxFileName = \"/Users/coryortega/Desktop/Projects/React-Native/components/LoginButton.tsx\";\n\nWebBrowser.maybeCompleteAuthSession();\nvar discovery = {\n  authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n  tokenEndpoint: 'https://accounts.spotify.com/api/token'\n};\n\nvar storeData = function storeData(value) {\n  return _regenerator.default.async(function storeData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regenerator.default.awrap(_asyncStorage.default.setItem('code', value));\n\n        case 3:\n          _context.next = 8;\n          break;\n\n        case 5:\n          _context.prev = 5;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(_context.t0);\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 5]], Promise);\n};\n\nvar LoginButton = function LoginButton() {\n  var _useAuthRequest = (0, _expoAuthSession.useAuthRequest)({\n    clientId: '5d228af4d8fe45d5b1bb9702187643c0',\n    scopes: ['user-read-email', 'playlist-modify-public'],\n    usePKCE: false,\n    redirectUri: 'http://localhost:19006/'\n  }, discovery),\n      _useAuthRequest2 = (0, _slicedToArray2.default)(_useAuthRequest, 3),\n      request = _useAuthRequest2[0],\n      response = _useAuthRequest2[1],\n      promptAsync = _useAuthRequest2[2];\n\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === 'success') {\n      var code = response.params.code;\n\n      _axios.default.post('https://accounts.spotify.com/api/token', {\n        \"grant_type\": \"authorization_code\",\n        \"code\": code,\n        \"redirect_uri\": 'http://localhost:19006/',\n        \"client_secret\": mysecret,\n        \"client_id\": '5d228af4d8fe45d5b1bb9702187643c0'\n      }).then(function (res) {\n        console.log(res);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, [response]);\n  var navigation = (0, _native.useNavigation)();\n  return React.createElement(_Button.default, {\n    disabled: !request,\n    title: (response == null ? void 0 : response.type) === 'success' ? \"Logged In \" : \"Login\",\n    onPress: function onPress() {\n      promptAsync();\n      navigation.navigate('TabOne', {\n        name: 'TabOne'\n      });\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  });\n};\n\nvar _default = LoginButton;\nexports.default = _default;","map":{"version":3,"sources":["/Users/coryortega/Desktop/Projects/React-Native/components/LoginButton.tsx"],"names":["WebBrowser","maybeCompleteAuthSession","discovery","authorizationEndpoint","tokenEndpoint","storeData","value","AsyncStorage","setItem","console","log","LoginButton","clientId","scopes","usePKCE","redirectUri","request","response","promptAsync","React","useEffect","type","code","params","axios","post","mysecret","then","res","catch","err","navigation","navigate","name"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;;;;;AAEAA,UAAU,CAACC,wBAAX;AAGA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,qBAAqB,EAAE,wCADP;AAEhBC,EAAAA,aAAa,EAAE;AAFC,CAAlB;;AAKA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAENC,sBAAaC,OAAb,CAAqB,MAArB,EAA6BF,KAA7B,CAFM;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAIZG,UAAAA,OAAO,CAACC,GAAR;;AAJY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB;;AAQA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA,wBACiB,qCACvC;AACEC,IAAAA,QAAQ,EAAE,kCADZ;AAEEC,IAAAA,MAAM,EAAE,CAAC,iBAAD,EAAoB,wBAApB,CAFV;AAKEC,IAAAA,OAAO,EAAE,KALX;AAOEC,IAAAA,WAAW,EAAE;AAPf,GADuC,EAcvCb,SAduC,CADjB;AAAA;AAAA,MACjBc,OADiB;AAAA,MACRC,QADQ;AAAA,MACEC,WADF;;AAkBxBC,EAAAA,KAAK,CAACC,SAAN,CAAgB,YAAM;AACpB,QAAI,CAAAH,QAAQ,QAAR,YAAAA,QAAQ,CAAEI,IAAV,MAAmB,SAAvB,EAAkC;AAAA,UACtBC,IADsB,GACbL,QAAQ,CAACM,MADI,CACtBD,IADsB;;AAE9BE,qBAAMC,IAAN,CAAW,wCAAX,EAAqD;AACjD,sBAAc,oBADmC;AAEjD,gBAAQH,IAFyC;AAGjD,wBAAgB,yBAHiC;AAIjD,yBAAiBI,QAJgC;AAKjD,qBAAiB;AALgC,OAArD,EAOCC,IAPD,CAOM,UAAAC,GAAG,EAAI;AACTnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACH,OATD,EAUCC,KAVD,CAUO,UAAAC,GAAG,EAAI;AACVrB,QAAAA,OAAO,CAACC,GAAR,CAAYoB,GAAZ;AACH,OAZD;AAaD;AACJ,GAjBD,EAiBG,CAACb,QAAD,CAjBH;AAmBA,MAAMc,UAAU,GAAG,4BAAnB;AAEA,SACE,oBAAC,eAAD;AACE,IAAA,QAAQ,EAAE,CAACf,OADb;AAEE,IAAA,KAAK,EAAE,CAAAC,QAAQ,QAAR,YAAAA,QAAQ,CAAEI,IAAV,MAAmB,SAAnB,GAA+B,YAA/B,GAA4C,OAFrD;AAGE,IAAA,OAAO,EAAE,mBAAM;AACbH,MAAAA,WAAW;AACXa,MAAAA,UAAU,CAACC,QAAX,CAAoB,QAApB,EAA8B;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAA9B;AAEC,KAPL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAWD,CAlDD;;eAoDetB,W","sourcesContent":["import * as React from 'react';\nimport * as WebBrowser from 'expo-web-browser';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { makeRedirectUri, useAuthRequest } from 'expo-auth-session';\nimport { useNavigation } from '@react-navigation/native';\nimport { Button } from 'react-native';\nimport axios from 'axios';\n\nWebBrowser.maybeCompleteAuthSession();\n\n// Endpoint\nconst discovery = {\n  authorizationEndpoint: 'https://accounts.spotify.com/authorize',\n  tokenEndpoint: 'https://accounts.spotify.com/api/token',\n};\n\nconst storeData = async (value: string) => {\n    try {\n      await AsyncStorage.setItem('code', value)\n    } catch (e) {\n      console.log(e)\n    }\n};\n\nconst LoginButton = () => {\n  const [request, response, promptAsync] = useAuthRequest(\n    {\n      clientId: '5d228af4d8fe45d5b1bb9702187643c0',\n      scopes: ['user-read-email', 'playlist-modify-public'],\n      // In order to follow the \"Authorization Code Flow\" to fetch token after authorizationEndpoint\n      // this must be set to false\n      usePKCE: false,\n      // For usage in managed apps using the proxy\n      redirectUri: 'http://localhost:19006/'\n    //   redirectUri: makeRedirectUri({\n    //     // For usage in bare and standalone\n    //     native: 'https://www.google.com/',\n    //   }),\n    },\n    discovery\n  );\n\n  React.useEffect(() => {\n    if (response?.type === 'success') {\n        const { code } = response.params;\n        axios.post('https://accounts.spotify.com/api/token', {\n            \"grant_type\": \"authorization_code\",\n            \"code\": code,\n            \"redirect_uri\": 'http://localhost:19006/',\n            \"client_secret\": mysecret,\n            \"client_id\":     '5d228af4d8fe45d5b1bb9702187643c0',\n        })\n        .then(res => {\n            console.log(res)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n      }\n  }, [response]);\n\n  const navigation = useNavigation();\n\n  return (\n    <Button\n      disabled={!request}\n      title={response?.type === 'success' ? \"Logged In \":\"Login\"}\n      onPress={() => {\n        promptAsync();\n        navigation.navigate('TabOne', { name: 'TabOne' })\n        // response?.type === 'success' ? props.navigation.navigate('Home')\n        }}\n    />\n  );\n}\n\nexport default LoginButton"]},"metadata":{},"sourceType":"script"}